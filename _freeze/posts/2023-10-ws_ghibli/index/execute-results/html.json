{
  "hash": "0e342c3bb4abd9d0b85ee686cb3b5595",
  "result": {
    "markdown": "---\ntitle: \"Raspando a página do Studio Ghibli, na Wikipédia\"\nauthor: \n  - \"Ornella Scardua Ferreira\" \ndate: \"2023-10-31\" \ncategories: \n  - \"Web Scraping\"\n  - \"Tutorial\"\ntoc: true \nimage: \"ghibli.png\" # imagem usada na página inicial junto ao post\nbibliography: \"pacotes.bib\" # arquivo de bibliografia. Pode adicionar mais arquivos!\ndraft: false # enquanto estiver draft: true, o post é um rascunho\n---\n\n\n::: {.callout-note collapse=\"false\"}\n## Autoria\n\n<center>\n\n![Foto](https://avatars.githubusercontent.com/u/62913147?v=4){style=\"width: 30%; border-radius: 50%;\"}\n\n[<i class=\"fab fa-github\"></i>](https://github.com/ornscar)\n</center>\n\nEste post foi escrito por **Ornella Scardua Ferreira**. ADICIONAR MINI BIO :)\n:::\n\n\n\n\n\nFundado em 1985 pelos cineastas japoneses Hayao Miyazaki, Isao Takahata, Toshio Suzuki e Yasuyoshi Tokuma, o Studio Ghibli é um dos estúdios de animação japonesa mais famosos ao redor do mundo. \n\nAlém de serem reconhecidos pelos traços e cores muito singulares de seus personagens e cenários, os filmes, curtas e comercias do Studio Ghibli são muito aclamados pela crítica e pelo público devido, principalmente, à sensibilidade dos temas que cerceiam suas histórias e a maneira como elas são contadas para nós.\n\n[![Imagem obtida no site Plano Crítico](img/studio_ghibli.jpg){fig-align=\"center\" width=\"80%\"}](https://www.planocritico.com/lista-estudio-ghibli-os-longas-ranqueados/)\n\nPor isso tudo, que tal \"scrapear\" (ou raspar) a [página do Studio Ghibli, na Wikipédia](https://pt.wikipedia.org/wiki/Studio_Ghibli) a maior enciclopédia colaborativa web do mundo, e coletar os dados de todos os filmes já lançados por esse estúdio de cinema? Scrapers e Ghibli-fãs, uni-vos!\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Imagem da página do Studio Ghibli, no Wikipédia.](img/fig1.png){#fig-1 fig-align='center' width=1552}\n:::\n:::\n\n\nPara quem não conhece os filmes, muitos estão disponíveis na Netflix!\n\n[![Página da Netflix com filmes do Studio Ghibli](img/netflix.png){fig-align=\"center\" width=\"80%\"}](https://www.netflix.com/br/browse/genre/81227213)\n\n# Etapas do *scraping*\n\nNesta seção, vamos apresentar cada uma das etapas necessárias para raspar os dados sobre os filmes do Studio Ghibli, no site da Wikipédia. Os processos vão envolver imitar a requisição de busca do navegador e \"parsear\" os arquivos obtidos, iterando-os com elementos para o tratamento dos erros e de barras de progresso. É importante mencionar, ainda, que a Wikipédia é um site estático escrito em HTML.\n\nPara tanto, vamos utilizar os pacotes R `{httr}` para acessar a web; `{xml2}` e `{rvest}` para extrair dados de arquivos HTML; `{purrr}` para iterar e identificar erros; `{progressr}` para incluir barras de progresso; o queridinho `{tidyverse}` para a manipulação e visualização dos dados extraídos; e, já que estamos falando de Studio Ghibli, `{ghibli}` para colorir nossos gráficos como um filme criado pelo próprio Miyazaki e cia.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(httr)\nlibrary(xml2)\nlibrary(rvest)\nlibrary(progressr)\nlibrary(tidyverse) # o {purrr} faz parte do {tidyverse}\nlibrary(ghibli)\n```\n:::\n\n\nMas não se preocupe porque ao longo da apresentação dos códigos vamos sempre corresponder às funções ao seus respectivos pacotes (por meio do `::`) para você saber exatamente com o que está lidando.\n\n## Requisição\n\nInicialmente, inspecionamos a página do Studio Ghibli na Wikipédia para encontrar os elementos em HTML que estão associados exclusivamente às informações dos filmes (como título, ano de lançamento, duração, diretor, elenco etc). Felizmente, esses dados estão todos resumidos em uma única tabela dentre a única tabela que existe na página (na Seção Filmografia, para ser mais exata) - o que deixou a tarefa de raspagem muito mais fácil, por sinal.\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Imagem da inspeção na página do Studio Ghibli, no Wikipédia.](img/fig2.png){#fig-2 fig-align='center' width=1552}\n:::\n:::\n\n\nEm primeiro lugar, vamos coletar somente os dados apresentados nessa tabela. Assim, simulamos a requisição apenas com a URL do site, sem deixar de salvar (com o nome `filmes_ghibli.html`) a página requerida no diretório `output/`. Como coletar essa tabela se trata de um *scraping* muito simples, já no próximo passo é possível ler o elemento HTML cujo parâmetro XPath é igual a `//*[@id='mw-content-text']/div[1]/table[3]`, obtido conforme mostra a @fig-2.\n\nO código para o processo da requisição e leitura da tabela em HTML pode ser visto a seguir. *Obs.: usamos a função `xml_find_first()` pois, neste caso, existia uma única tabela.*\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# URL da página do Wikipédia\n\nu_ghibli <- \"https://pt.wikipedia.org/wiki/Studio_Ghibli\"\n\n# requisicao GET\n\nr_ghibli <- httr::GET(\n  u_ghibli, \n  httr::write_disk(\"output/filmes_ghibli.html\", overwrite = TRUE) # salvar pagina no disco\n)\n\n# coletando a tabela\n\ntabela_ghibli <- r_ghibli |> \n  xml2::read_html() |>  # ler arquivo HTML\n  xml2::xml_find_first(\"//*[@id='mw-content-text']/div[1]/table[3]\") # parametro XPath\n```\n:::\n\n\nA tabela (ainda em HTML, lembrando) que acabamos de obter só contém as informações mais gerais dos filmes do Studio Ghibli. Mas... e se quisermos montar uma base de dados em que seja possível, por exemplo, analisar sobre a duração, gênero e elenco dos filmes? Bem, para esse fim, vamos continuar utilizando a tabela anterior, que, como podemos observar na @fig-2, está sob a *tag* `<table>` e o atributo `class='wikitable unsortable'`. Percebam, ainda, agora na @fig-3, que os títulos são links (identificados com a *tag* `<a>`) que direcionam para as páginas individuais de cada um dos filmes, locais onde estão as informações pelas quais estamos interessados.\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Imagem da inspeção dos títulos na tabela da página do Studio Ghibli, no Wikipédia.](img/fig3.png){#fig-3 fig-align='center' width=1552}\n:::\n:::\n\n\nPara extrair esses links, precisamos encontrar todos os links disponíveis na tabela cuja classe é do tipo `'wikitable unsortable'`. Logo, lemos a página HTML e coletamos todos os elementos (ou nós) que fazem parte das *tags* `<a>` e os atrbiutos do tipo `href`. Para tal tarefa, construímos o seguinte código:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlinks_filmes <- r_ghibli |> \n  xml2::read_html() |> # ler arquivo HTML\n  xml2::xml_find_all(\"//table[@class='wikitable unsortable']//a\") |> # coletar todos os nos da tabela dentro das tags <a>\n  xml2::xml_attr(\"href\") # coletar atributos href\n\nlinks_filmes\n #>  [1] \"/wiki/Tenk%C5%AB_no_Shiro_Rapyuta\"        \n #>  [2] \"/wiki/Hayao_Miyazaki\"                     \n #>  [3] \"/wiki/Isao_Takahata\"                      \n #>  [4] \"/wiki/Joe_Hisaishi\"                       \n #>  [5] \"/wiki/Hotaru_no_Haka\"                     \n #>  [6] \"/wiki/Isao_Takahata\"                      \n #>  [7] \"/wiki/Tonari_no_Totoro\"                   \n #>  [8] \"/wiki/Majo_no_Takky%C5%ABbin\"             \n #>  [9] \"/wiki/Omoide_Poro_Poro\"                   \n #> [10] \"/wiki/Kurenai_no_Buta\"                    \n #> [11] \"/wiki/Umi_ga_Kikoeru\"                     \n #> [12] \"/wiki/Heisei_Tanuki_Gassen_Ponpoko\"       \n #> [13] \"/wiki/Mimi_wo_Sumaseba\"                   \n #> [14] \"/wiki/Mononoke_Hime\"                      \n #> [15] \"/wiki/H%C5%8Dhokekyo_Tonari_no_Yamada-kun\"\n #> [16] \"/wiki/A_Viagem_de_Chihiro\"                \n #> [17] \"/wiki/O_Reino_dos_Gatos\"                  \n #> [18] \"/wiki/Hiroyuki_Morita\"                    \n #> [19] \"/wiki/Hauru_no_Ugoku_Shiro\"               \n #> [20] \"/wiki/Contos_de_Terramar\"                 \n #> [21] \"/wiki/Goro_Miyazaki\"                      \n #> [22] \"/wiki/Gake_no_ue_no_Ponyo\"                \n #> [23] \"/wiki/Kari-gurashi_no_Arietti\"            \n #> [24] \"/wiki/Hiromasa_Yonebayashi\"               \n #> [25] \"/wiki/Kokuriko-zaka_Kara\"                 \n #> [26] \"/wiki/Kaze_Tachinu\"                       \n #> [27] \"/wiki/O_Conto_da_Princesa_Kaguya\"         \n #> [28] \"/wiki/Yoshiaki_Nishimura\"                 \n #> [29] \"/wiki/Omoide_no_Marnie\"                   \n #> [30] \"/wiki/%C4%80ya_to_Majo\"                   \n #> [31] \"/wiki/Kimitachi_wa_Dou_Ikiru_ka\"\n```\n:::\n\n\nNo entanto, os 31 links gerados são da forma `/wiki/nome_do_filme`, ou seja, inválidos. Validamo-os com o próximo código:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlinks_filmes <- paste0(\"https://pt.wikipedia.org\", links_filmes)\n\nhead(links_filmes)\n #> [1] \"https://pt.wikipedia.org/wiki/Tenk%C5%AB_no_Shiro_Rapyuta\"\n #> [2] \"https://pt.wikipedia.org/wiki/Hayao_Miyazaki\"             \n #> [3] \"https://pt.wikipedia.org/wiki/Isao_Takahata\"              \n #> [4] \"https://pt.wikipedia.org/wiki/Joe_Hisaishi\"               \n #> [5] \"https://pt.wikipedia.org/wiki/Hotaru_no_Haka\"             \n #> [6] \"https://pt.wikipedia.org/wiki/Isao_Takahata\"\n```\n:::\n\n\nUma vez corrigidos, podemos fazer a requisição de todas as páginas dos filmes de uma só vez, iterando o processo de tal maneira que algum erro que aconteça em alguma requisição seja identificado.\n\nA primeira função que vamos criar é a `get_links()`, cujo papel é simplesmente obter uma requisição da mesma forma que havíamos feito inicialmente.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nget_links <- function(links, ids) {\n  arquivo <- paste0(\"output/\", ids, \".html\")\n  r <- httr::GET(links, write_disk(arquivo, overwrite = TRUE))\n  \n  arquivo\n}\n```\n:::\n\n\nA segunda função que vamos constuir, a `get_progresso()`, vai obter as requisições por meio da função `get_links()` adicionada da informação de erro com o auxílio da função `purrr::possibly()`. Vejam que, caso aconteça algum problema durante a requisição feita pela `get_links()`, a seguinte mensagem de erro aparecerá: \"ERRO NA REQUISIÇÃO\". A mensagem pode ser escrita de acordo com o gosto do leitor, vale frisar. \n\nBom, já ao utilizar a função `progressr::with_progress()`, incluímos uma barra de progresso à iteração. Dois comentários importantes a serem feitos: (1) a função `purrr::possibly()` permite o andamento da iteração mesmo se houver algum erro no meio do caminho, e se ocorrer algum erro, ela identifica exatamente em qual momento o erro aconteceu; e (2) a barra de progresso serve para o acompanhamento de cada passo da iteração (@fig-5).\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# funcao para obter as requisicoes com erro\n\nget_progresso <- function(links, ids, progresso) {\n  # progresso\n  progresso()\n  # mapear erros nas requisicoes\n  get_erro <- purrr::possibly(get_links, otherwise = \"ERRO NA REQUISIÇÃO\")\n  get_erro(links, ids)\n}\n\n# obtendo as requisicoes com erro e barra de progresso\n\nprogressr::with_progress({\n  # barra de progresso\n  progresso <- progressr::progressor(length(links_filmes))\n  purrr::map2(\n    links_filmes, seq_along(links_filmes), \n    get_progresso, p = progresso\n  )\n})\n #> [[1]]\n #> [1] \"output/1.html\"\n #> \n #> [[2]]\n #> [1] \"output/2.html\"\n #> \n #> [[3]]\n #> [1] \"output/3.html\"\n #> \n #> [[4]]\n #> [1] \"output/4.html\"\n #> \n #> [[5]]\n #> [1] \"output/5.html\"\n #> \n #> [[6]]\n #> [1] \"output/6.html\"\n #> \n #> [[7]]\n #> [1] \"output/7.html\"\n #> \n #> [[8]]\n #> [1] \"output/8.html\"\n #> \n #> [[9]]\n #> [1] \"output/9.html\"\n #> \n #> [[10]]\n #> [1] \"output/10.html\"\n #> \n #> [[11]]\n #> [1] \"output/11.html\"\n #> \n #> [[12]]\n #> [1] \"output/12.html\"\n #> \n #> [[13]]\n #> [1] \"output/13.html\"\n #> \n #> [[14]]\n #> [1] \"output/14.html\"\n #> \n #> [[15]]\n #> [1] \"output/15.html\"\n #> \n #> [[16]]\n #> [1] \"output/16.html\"\n #> \n #> [[17]]\n #> [1] \"output/17.html\"\n #> \n #> [[18]]\n #> [1] \"output/18.html\"\n #> \n #> [[19]]\n #> [1] \"output/19.html\"\n #> \n #> [[20]]\n #> [1] \"output/20.html\"\n #> \n #> [[21]]\n #> [1] \"output/21.html\"\n #> \n #> [[22]]\n #> [1] \"output/22.html\"\n #> \n #> [[23]]\n #> [1] \"output/23.html\"\n #> \n #> [[24]]\n #> [1] \"output/24.html\"\n #> \n #> [[25]]\n #> [1] \"output/25.html\"\n #> \n #> [[26]]\n #> [1] \"output/26.html\"\n #> \n #> [[27]]\n #> [1] \"output/27.html\"\n #> \n #> [[28]]\n #> [1] \"output/28.html\"\n #> \n #> [[29]]\n #> [1] \"output/29.html\"\n #> \n #> [[30]]\n #> [1] \"output/30.html\"\n #> \n #> [[31]]\n #> [1] \"output/31.html\"\n```\n:::\n\n\nNenhum \"ERRO NA REQUISIÇÃO\", yes!\n\nAh, na @fig-5 é possível ter uma ideia de como é uma barra de progresso.\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Barra de progresso na prática.](img/fig5.png){#fig-5 fig-align='center' width=586}\n:::\n:::\n\n\n## *Parsing*\n\nAo realizar raspagem de dados, a etapa de *parsing* nada mais é do que processar os dados brutos, que geralmente estão nos formatos `.html` ou `.json`, e posteriormente organizá-los de modo que consigamos realizar análises. Em nosso caso, coletamos dados `.html` tanto no cenário em que queríamos as informações expostas na tabelona da página do Studio Ghibli quanto no cenário em que buscamos as informações dos filmes em cada um dos links direcionáveis dispostos nessa mesma tabela. Em ambas as situações, transformamos os dados para um *data frame* (ou um *tibble*) ao fazer uma aplicação simples com a função `rvest::html_table()`.\n\nNotem que, no segundo cenário, optamos pelo arquivo `5.html`. Ele se refere ao filme \"O Túmulo de Vagalumes\", o filme do Studio Ghibli preferido desta que vos escreve - mas o processo de *parsing* para qualquer um dos 31 arquivos gerados é o mesmo, caso seu filme favorito seja outro. Nesse caso, quando aplicamos a função mágica `rvest::html_table()`, o R retorna uma lista com 8 elementos, pois lembre-se que foram coletados todos os nós das *tags* `<a>` e todos os atributos da forma `href`.\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Box da página do Studio Ghibli, no Wikipédia, referente ao elemento [[1]].](img/fig4.png){#fig-4 fig-align='center' width=1552}\n:::\n:::\n\n\nPara esse post, vamos nos limitar ao primeiro elemento (`[[1]]`), que corresponde ao box à direita na página <https://pt.wikipedia.org/wiki/Hotaru_no_Haka> (@fig-4), o qual contém informações bastante interessantes para uma análise sucinta do filme.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# primeiro cenario\n\ntabela_ghibli <- tabela_ghibli |>   \n  rvest::html_table(header = TRUE) # transformar dados HTML em tibble\n\ntabela_ghibli\n #> # A tibble: 23 × 6\n #>    Ano   Título                    Diretor `Roteirista(s)` `Produtor(es)` Música\n #>    <chr> <chr>                     <chr>   <chr>           <chr>          <chr> \n #>  1 1986  Tenkū no Shiro Rapyuta    Hayao … Hayao Miyazaki  Isao Takahata  Joe H…\n #>  2 1988  Hotaru no Haka            Isao T… Isao Takahata   Toru Hara      Michi…\n #>  3 1988  Tonari no Totoro          Hayao … Hayao Miyazaki  Toru Hara      Joe H…\n #>  4 1989  Majo no Takkyūbin         Hayao … Hayao Miyazaki  Hayao Miyazaki Joe H…\n #>  5 1991  Omoide Poro Poro          Isao T… Isao Takahata   Toshio Suzuki  Katsu…\n #>  6 1992  Kurenai no Buta           Hayao … Hayao Miyazaki  Toshio Suzuki  Joe H…\n #>  7 1993  Umi ga Kikoeru            Tomomi… Keiko Niwa      Toshio Suzuki  Shige…\n #>  8 1994  Heisei Tanuki Gassen Pon… Isao T… Isao Takahata   Toshio Suzuki  Shang…\n #>  9 1995  Mimi wo Sumaseba          Yoshif… Hayao Miyazaki  Toshio Suzuki  Yuji …\n #> 10 1997  Mononoke Hime             Hayao … Hayao Miyazaki  Toshio Suzuki  Joe H…\n #> # ℹ 13 more rows\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# segundo cenario\n\ntumulo_vagalumes <- xml2::read_html(\"output/5.html\") |>  \n  rvest::html_table() # transformar dados HTML em tibble\n\ntumulo_vagalumes\n #> [[1]]\n #> # A tibble: 19 × 2\n #>    `Hotaru no Haka`                                         `Hotaru no Haka`    \n #>    <chr>                                                    <chr>               \n #>  1 .mw-parser-output .noitalic{font-style:normal}火垂るの墓 \".mw-parser-output …\n #>  2 Hotaru no Haka                                           \"Hotaru no Haka\"    \n #>  3 No Brasil                                                \"O Túmulo dos Vagal…\n #>  4 Em Portugal                                              \"O Túmulo dos Piril…\n #>  5 Japão1988 •  cor •  89 min                               \"Japão1988 •  cor •…\n #>  6 Gênero                                                   \"drama[4]guerra[5]\" \n #>  7 Direção                                                  \"Isao Takahata\"     \n #>  8 Produção                                                 \"Toru Hara\"         \n #>  9 Roteiro                                                  \"Isao Takahata\"     \n #> 10 Baseado em                                               \"\\\"Hotaru no Haka\\\"…\n #> 11 Elenco                                                   \"Tsutomu TatsumiAya…\n #> 12 Música                                                   \"Michio Mamiya\"     \n #> 13 Cinematografia                                           \"Nobuo Koyama\"      \n #> 14 Edição                                                   \"Takeshi Seyama\"    \n #> 15 Companhia(s) produtora(s)                                \"Studio Ghibli\"     \n #> 16 Distribuição                                             \"Toho\"              \n #> 17 Lançamento                                               \"16 de abril de 198…\n #> 18 Idioma                                                   \"japonês\"           \n #> 19 Receita                                                  \"¥ 590 milhões[6]\"  \n #> \n #> [[2]]\n #> # A tibble: 20 × 4\n #>    X1             X2                                                 X3    X4   \n #>    <chr>          <chr>                                              <chr> <lgl>\n #>  1 N.º            \"Título\"                                           Dura… NA   \n #>  2 1.             \"\\\"Setsuko to Seita ~ Main Title (節子と清太～メ…  2:57  NA   \n #>  3 2.             \"\\\"Yake Nohara (焼野原, Yake Nohara?)\\\"\"           6:51  NA   \n #>  4 3.             \"\\\"Haha no Shi (母の死, Haha no Shi?)\\\"\"           6:34  NA   \n #>  5 4.             \"\\\"Shoka (初夏, Shoka?)\\\"\"                         3:14  NA   \n #>  6 5.             \"\\\"Ike no Hotori (池のほとり, Ike no Hotori?)\\\"\"   2:21  NA   \n #>  7 6.             \"\\\"Umi he (海へ, Umi he?)\\\"\"                       1:37  NA   \n #>  8 7.             \"\\\"Namiuchigiwa (波打際, Namiuchigiwa?)\\\"\"         1:37  NA   \n #>  9 8.             \"\\\"Higasa (日傘, Higasa?)\\\"\"                       2:26  NA   \n #> 10 9.             \"\\\"Sakura no Shita (桜の下, Sakura no Shita?)\\\"\"   1:31  NA   \n #> 11 10.            \"\\\"Dorobbusu (ドロップス, Dorobbusu?)\\\"\"           2:13  NA   \n #> 12 11.            \"\\\"Hikkoshi (引越し, Hikkoshi?)\\\"\"                 2:17  NA   \n #> 13 12.            \"\\\"Keimai (兄弟, Keimai?)\\\"\"                       2:15  NA   \n #> 14 13.            \"\\\"Hotaru (ほたる, Hotaru?)\\\"\"                     4:12  NA   \n #> 15 14.            \"\\\"Hotaru no Haka (ほたるの墓, Hotaru no Haka?)\\\"\" 1:46  NA   \n #> 16 15.            \"\\\"Yuuyake (夕焼け, Yuuyake?)\\\"\"                   0:53  NA   \n #> 17 16.            \"\\\"Shura (修羅, Shura?)\\\"\"                         3:08  NA   \n #> 18 17.            \"\\\"Hika (悲劇, Hika?)\\\"\"                           3:12  NA   \n #> 19 18.            \"\\\"Futari ~ End Title (ふたり～エンドタイトル, Fu… 8:52  NA   \n #> 20 Duração total: \"Duração total:\"                                   58:13 NA   \n #> \n #> [[3]]\n #> # A tibble: 3 × 2\n #>   Classificação Classificação   \n #>   <chr>         <chr>           \n #> 1 Brasil:       L[40]/12[34][35]\n #> 2 Japão:        G[41]           \n #> 3 Portugal:     M/12[37]        \n #> \n #> [[4]]\n #> # A tibble: 3 × 6\n #>     Ano Premiação                    Categoria `Destinatário(s)` Resultado Ref. \n #>   <int> <chr>                        <chr>     <chr>             <chr>     <chr>\n #> 1  1988 Blue Ribbon Awards           Prêmio E… Isao Takahata     Venceu    [30] \n #> 2  1994 Chicago International Child… Prêmio d… Isao Takahata     Venceu    [30] \n #> 3  1994 Chicago International Child… Prêmio d… Isao Takahata     Venceu    [30] \n #> \n #> [[5]]\n #> # A tibble: 4 × 2\n #>   X1                                                                       X2   \n #>   <chr>                                                                    <chr>\n #> 1 \"Outros projetos Wikimedia também contêm material sobre Hotaru no Haka:\" Outr…\n #> 2 \"\"                                                                       Cita…\n #> 3 \"\"                                                                       Cate…\n #> 4 \"\"                                                                       Base…\n #> \n #> [[6]]\n #> # A tibble: 8 × 9\n #>   `vdeStudio Ghibli`     `vdeStudio Ghibli` `vdeStudio Ghibli` ``    ``    ``   \n #>   <chr>                  <chr>              <chr>              <chr> <chr> <chr>\n #> 1 \"Hayao Miyazaki\\nIsao… \"Hayao Miyazaki\\n… \"Hayao Miyazaki\\n…  <NA> <NA>   <NA>\n #> 2 \"Filmografia\"          \"Longas-metragens… \"Longas-metragens\" \"Ten… Curt… \"On …\n #> 3 \"Longas-metragens\"     \"Tenkū no Shiro R…  <NA>               <NA> <NA>   <NA>\n #> 4 \"Curtas-metragens\"     \"On Your Mark (19…  <NA>               <NA> <NA>   <NA>\n #> 5 \"Coproduções\"          \"Shiki-Jitsu (200…  <NA>               <NA> <NA>   <NA>\n #> 6 \"Jogos eletrônicos\"    \"Jade Cocoon 2 (2…  <NA>               <NA> <NA>   <NA>\n #> 7 \"Ver também\"           \"Ghibli Museum Li…  <NA>               <NA> <NA>   <NA>\n #> 8 \".mw-parser-output .s… \".mw-parser-outpu… \".mw-parser-outpu…  <NA> <NA>   <NA>\n #> # ℹ 3 more variables: `` <chr>, `` <chr>, `` <chr>\n #> \n #> [[7]]\n #> # A tibble: 3 × 2\n #>   X1               X2                                                           \n #>   <chr>            <chr>                                                        \n #> 1 Longas-metragens \"Tenkū no Shiro Rapyuta (1986)\\nHotaru no Haka (1988)\\nTonar…\n #> 2 Curtas-metragens \"On Your Mark (1995)\\nGiburīzu (2000)\\nFirumu Guru Guru (200…\n #> 3 Coproduções      \"Shiki-Jitsu (2000)\\nInosensu: Kôkaku kidôtai (2004)\\nLa Tor…\n #> \n #> [[8]]\n #> # A tibble: 1 × 2\n #>   X1                     X2                                                     \n #>   <chr>                  <chr>                                                  \n #> 1 Controle de autoridade \": Q274520\\n WorldCat\\nVIAF: 316752206\\nANN (animé): 1…\n```\n:::\n\n\n# Manipulação e visualização dos dados\n\nÉ verdade que a função `rvest::html_table()` nos presenteia com dados muito próximos dos desejados, precisando apenas de um ajuste aqui e/ou acolá. Mas esses \"ajustes\" são facilmente manipuláveis com as ferramentas da poderosa família `{tidyverse}`, como a `{dply}`, `{janitor}`, `{ggplot2}`... Porém, como o foco deste post é o *web scraping* e muito provavelmente você já é um *expert* em organizar (e apresentar) dados, não entraremos em detalhes em como os códigos desta seção foram construídos. Mas segue a premissa de que primeiro manipulamos os dados, e depois apresentamos os dados.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# manipulacao dos dados\n\ntabela_ghibli <- tabela_ghibli |>\n  # limpa os nomes das variaveis\n  janitor::clean_names() |> \n  # renomeia variaveis\n  dplyr::rename(roteirista = roteirista_s, produtor = produtor_es) |> \n  # recodificando variaveis\n  dplyr::mutate(\n    roteirista = recode(\n      roteirista, \n      `Goro MiyazakiKeiko Niwa` = \"Goro Miyazaki, Keiko Niwa\",\n      `Hayao MiyazakiKeiko Niwa` = \"Hayao Miyazaki, Keiko Niwa\",\n      `Masashi AndoKeiko NiwaHiromasa Yonebayashi` = \"Masashi Ando, Keiko Niwa, Hiromasa Yonebayashi\",\n      `Keiko NiwaEmi Gunji` = \"Keiko Niwa, Emi Gunji\"\n    ),\n    produtor = recode(\n      produtor, \n      `Takashi ShojiSeiichiro Ujiie` = \"Takashi Shoji, Seiichiro Ujiie\",\n      `Toshio SuzukiNozomu Takahashi` = \"Toshio Suzuki, Nozomu Takahashi\",\n      `Toshio SuzukiTomohiko Ishii` = \"Toshio Suzuki, Tomohiko Ishii\",\n      `Yoshiaki NishimuraSeiichiro Ujiie` = \"Yoshiaki Nishimura, Seiichiro Ujiie\",\n      `Hayao MiyazakiToshio Suzuki` = \"Hayao Miyazaki, Toshio Suzuki\"\n    )\n  )\n\ntabela_ghibli\n #> # A tibble: 23 × 6\n #>    ano   titulo                       diretor         roteirista produtor musica\n #>    <chr> <chr>                        <chr>           <chr>      <chr>    <chr> \n #>  1 1986  Tenkū no Shiro Rapyuta       Hayao Miyazaki  Hayao Miy… Isao Ta… Joe H…\n #>  2 1988  Hotaru no Haka               Isao Takahata   Isao Taka… Toru Ha… Michi…\n #>  3 1988  Tonari no Totoro             Hayao Miyazaki  Hayao Miy… Toru Ha… Joe H…\n #>  4 1989  Majo no Takkyūbin            Hayao Miyazaki  Hayao Miy… Hayao M… Joe H…\n #>  5 1991  Omoide Poro Poro             Isao Takahata   Isao Taka… Toshio … Katsu…\n #>  6 1992  Kurenai no Buta              Hayao Miyazaki  Hayao Miy… Toshio … Joe H…\n #>  7 1993  Umi ga Kikoeru               Tomomi Mochizu… Keiko Niwa Toshio … Shige…\n #>  8 1994  Heisei Tanuki Gassen Ponpoko Isao Takahata   Isao Taka… Toshio … Shang…\n #>  9 1995  Mimi wo Sumaseba             Yoshifumi Kondo Hayao Miy… Toshio … Yuji …\n #> 10 1997  Mononoke Hime                Hayao Miyazaki  Hayao Miy… Toshio … Joe H…\n #> # ℹ 13 more rows\n```\n:::\n\n\nNa primeira aplicação, construímos um gráfico para visualizar de forma mais \"fofinha\" o ano de lançamento dos filmes do estúdio. E nada mais fofinho do que um gráfico cheio de Totorinhos, não é mesmo?\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# grafico animado\n  \nghibli <- \"ghibli.png\" # carrega imagem\n\ntabela_ghibli |> \n  dplyr::filter(ano != \"ASA\") |> \n  # reordena os filmes por ano de lancamento\n  dplyr::mutate(\n    ano = as.numeric(ano),\n    titulo = forcats::fct_reorder(titulo, ano)\n  ) |> \n  ggplot2::ggplot(aes(x = ano, y = titulo)) +\n  # adiciona imagem do totoro\n  ggimage::geom_image(image = ghibli, size = .04) +\n  # adiciona temas ao grafico\n  ggplot2::theme_classic() +\n  ggplot2::theme_light() +\n  # adicona rotulos ao grafico\n  ggplot2::labs(\n    title = \"Ano de lançamento dos filmes do Studio Ghibli\",\n    x = \"\", y = \"Filme\"\n  )\n```\n\n::: {.cell-output-display}\n![Gráfico animado sobre o ano de lançamento dos filmes do Studio Ghibli.](index_files/figure-html/graf1-1.png){fig-align='center' width=672}\n:::\n:::\n\n\nAlém de mostrarmos de maneira mais elegante o número de filmes dirigidos pelos seus cineastas. A propósito, oportunidade única para utilizar o pacote `{ghibli}`, que contém paletas de cores de vários filmes do Studio Ghibli, como \"[A Princesa Mononoke](https://www.netflix.com/br/title/28630857)\" (a escolhida), \"[Ponyo - Uma Amizade que Veio do Mar](https://www.netflix.com/br/title/70106454)\" e \"[A Viagem de Chihiro](https://www.netflix.com/br/title/60023642)\".\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# grafico de barras\n\ntabela_ghibli |> \n  # agrupa filmes por diretor\n  dplyr::group_by(diretor) |> \n  # conta a quantidade de filmes que cada diretor lancou\n  dplyr::summarise(n = n()) |> \n  # reordena em ordem decrescente os diretores por quantidade de filme\n  dplyr::mutate(diretor = forcats::fct_reorder(diretor, -n)) |> \n  ggplot2::ggplot(aes(x = diretor, y = n, fill = diretor)) +\n  ggplot2::geom_bar(stat = \"identity\") +\n  ggplot2::scale_y_continuous(breaks = seq(0, 10, by = 2)) +\n  # adiciona temas ao grafico\n  ggplot2::theme_classic() +\n  ggplot2::theme_light() +\n  # paleta de cores do filme 'princesa mononoke'\n  ghibli::scale_fill_ghibli_d(\"MononokeMedium\") +\n  # adiciona rotulos nas barras do grafico\n  ggplot2::geom_label(\n    aes(label = n), position = position_dodge(width = 1), \n    show.legend = FALSE, color = \"white\"\n  ) +\n  # adiciona rotulo aos graficos\n  ggplot2::labs(\n    title = \"Número de filmes do Studio Ghibli, por diretor\", \n    x = \"\", y = \"\", color = \"diretor\"\n  ) +\n  ggplot2::theme(\n    legend.title = element_blank(), # remove titulo da legenda\n    legend.position = \"bottom\",     # posiciona legenda embaixo do grafico\n    axis.text.x = element_blank(),  # remove valores do eixo x\n    axis.ticks.x = element_blank()  # remove ticks do eixo x\n  )\n```\n\n::: {.cell-output-display}\n![Gráfico de barras sobre o número de filmes produzidos no Studio Ghibli, por diretor.](index_files/figure-html/graf2-1.png){fig-align='center' width=672}\n:::\n:::\n\n\n\n\n\n\nPor último, como resultado da segunda aplicação, vamos construir uma tabela, uma espécia de ficha técnica, com as informações que foram coletadas do filme \"O Túmulo de Vagalumes\". *Obs.: optamos por uma análise simples nesse caso. Uma sugestão seria concatenar os dados dos boxs de todos os filmes em uma única base e calcular a média de duração dos filmes ou verificar qual o gênero mais comum entre eles, por exemplo*.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# manipulando os dados\n\ntumulo_vagalumes <- tumulo_vagalumes |> \n  # seleciona o primeiro elemento da lista\n  purrr::pluck(1) %>%\n  # remove linhas 1 e 2\n  .[c(-1, -2), ]\n\ncolnames(tumulo_vagalumes) <- c(\"categoria\", \"descricao\") # renomeia os nomes das variaveis\n\ntumulo_vagalumes <- tumulo_vagalumes |> \n  # transforma base em formato wide (o que e linha vira coluna)\n  tidyr::pivot_wider(names_from = \"categoria\", values_from = \"descricao\") |>\n  # organiza os nomes das variaveis\n  janitor::clean_names() |> \n  # renomeia variaveis\n  dplyr::rename(\n    titulo_br = no_brasil,\n    titulo_pt = em_portugal,\n    duracao_min = japao1988_cor_89_min,\n    produtora = companhia_s_produtora_s,\n    receita_milhoes = receita\n  ) |> \n  # organiza variaveis\n  dplyr::mutate(\n    titulo_br = stringr::str_sub(titulo_br, end = 22),\n    titulo_pt = stringr::str_sub(titulo_pt, end = 23),\n    duracao_min = stringr::str_sub(duracao_min, start = 21, end = 22),\n    elenco = recode(elenco, `Tsutomu TatsumiAyano ShiraishiYoshiko ShinoharaAkemi Yamaguchi` = \"Tsutomu Tatsumi, Ayano Shiraishi, Yoshiko Shinohara, Akemi Yamaguchi\"),\n    genero = recode(genero, `drama[4]guerra[5]` = \"drama, guerra\"),\n    lancamento = stringr::str_sub(lancamento, start = 22, end = 31),\n    receita_milhoes = stringr::str_sub(receita_milhoes, start = 2, end = 5)\n  )\n\ntumulo_vagalumes\n #> # A tibble: 1 × 17\n #>   titulo_br     titulo_pt duracao_min genero direcao producao roteiro baseado_em\n #>   <chr>         <chr>     <chr>       <chr>  <chr>   <chr>    <chr>   <chr>     \n #> 1 O Túmulo dos… O Túmulo… 89          drama… Isao T… Toru Ha… Isao T… \"\\\"Hotaru…\n #> # ℹ 9 more variables: elenco <chr>, musica <chr>, cinematografia <chr>,\n #> #   edicao <chr>, produtora <chr>, distribuicao <chr>, lancamento <chr>,\n #> #   idioma <chr>, receita_milhoes <chr>\n```\n:::\n\n\nA tabela:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# tabela \n\ntumulo_vagalumes |> \n  # retorna base em formato longo (o que e coluna vira linha)\n  tidyr::pivot_longer(\n    cols = 1:17, \n    names_to = \"categoria\", values_to = \"descricao\"\n  ) |> \n  # cria tabela\n  gt::gt() |> \n  gt::tab_header(\n    title = \"Túmulo de Vagalumes\", \n    subtitle = \"Ficha do filme\"\n  )\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"xsvxfbkpmo\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#xsvxfbkpmo table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#xsvxfbkpmo thead, #xsvxfbkpmo tbody, #xsvxfbkpmo tfoot, #xsvxfbkpmo tr, #xsvxfbkpmo td, #xsvxfbkpmo th {\n  border-style: none;\n}\n\n#xsvxfbkpmo p {\n  margin: 0;\n  padding: 0;\n}\n\n#xsvxfbkpmo .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#xsvxfbkpmo .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#xsvxfbkpmo .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#xsvxfbkpmo .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#xsvxfbkpmo .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#xsvxfbkpmo .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xsvxfbkpmo .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#xsvxfbkpmo .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#xsvxfbkpmo .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#xsvxfbkpmo .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#xsvxfbkpmo .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#xsvxfbkpmo .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#xsvxfbkpmo .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#xsvxfbkpmo .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#xsvxfbkpmo .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#xsvxfbkpmo .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#xsvxfbkpmo .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#xsvxfbkpmo .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#xsvxfbkpmo .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xsvxfbkpmo .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#xsvxfbkpmo .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#xsvxfbkpmo .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#xsvxfbkpmo .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xsvxfbkpmo .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#xsvxfbkpmo .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#xsvxfbkpmo .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xsvxfbkpmo .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xsvxfbkpmo .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#xsvxfbkpmo .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xsvxfbkpmo .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#xsvxfbkpmo .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xsvxfbkpmo .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#xsvxfbkpmo .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xsvxfbkpmo .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#xsvxfbkpmo .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xsvxfbkpmo .gt_left {\n  text-align: left;\n}\n\n#xsvxfbkpmo .gt_center {\n  text-align: center;\n}\n\n#xsvxfbkpmo .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#xsvxfbkpmo .gt_font_normal {\n  font-weight: normal;\n}\n\n#xsvxfbkpmo .gt_font_bold {\n  font-weight: bold;\n}\n\n#xsvxfbkpmo .gt_font_italic {\n  font-style: italic;\n}\n\n#xsvxfbkpmo .gt_super {\n  font-size: 65%;\n}\n\n#xsvxfbkpmo .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#xsvxfbkpmo .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#xsvxfbkpmo .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#xsvxfbkpmo .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#xsvxfbkpmo .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#xsvxfbkpmo .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#xsvxfbkpmo .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal\" style>Túmulo de Vagalumes</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>Ficha do filme</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"categoria\">categoria</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"descricao\">descricao</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">titulo_br</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">O Túmulo dos Vagalumes</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">titulo_pt</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">O Túmulo dos Pirilampos</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">duracao_min</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">89</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">genero</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">drama, guerra</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">direcao</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">Isao Takahata</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">producao</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">Toru Hara</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">roteiro</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">Isao Takahata</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">baseado_em</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">\"Hotaru no Haka\", de Akiyuki Nosaka</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">elenco</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">Tsutomu Tatsumi, Ayano Shiraishi, Yoshiko Shinohara, Akemi Yamaguchi</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">musica</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">Michio Mamiya</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">cinematografia</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">Nobuo Koyama</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">edicao</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">Takeshi Seyama</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">produtora</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">Studio Ghibli</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">distribuicao</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">Toho</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">lancamento</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">1988-04-16</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">idioma</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\">japonês</td></tr>\n    <tr><td headers=\"categoria\" class=\"gt_row gt_left\">receita_milhoes</td>\n<td headers=\"descricao\" class=\"gt_row gt_left\"> 590</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nLegal, né?\n\nPara finalizar, deixo uma das definições de amor mais legais que já ouvi, que não poderia ter vindo se não pela mente brilhante de Hayao Miyazaki:\n\n> *\"Tornei-me cético em relação à regra não escrita de que só porque um menino e uma menina aparecem no mesmo filme, um romance deve acontecer. Em vez disso, quero retratar um relacionamento um pouco diferente, onde os dois se inspiram mutuamente para viver -- se eu puder, então talvez eu esteja mais perto de retratar uma verdadeira expressão de amor.\"*\n\nHasta!\n\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\n<!-- inicio font awesome -->\n\n\n```{=html}\n<script src=\"https://kit.fontawesome.com/1f72d6921a.js\" crossorigin=\"anonymous\"></script>\n```\n\n<!-- final font awesome -->\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}