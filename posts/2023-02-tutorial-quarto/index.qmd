---
title: "E a√≠, vamos falar de Quarto?"
subtitle: "Tutorial: Relat√≥rio em Quarto"
author: 
  - "[Ariane Hayana](https://www.linkedin.com/in/arianehayana/)" 
date: "2023-02-04"
categories: 
  - "Quarto"
  - "Tutorial"
  - "Relat√≥rios"
toc: true 
image: "images/img-0.png" 
bibliography: "pacotes.bib" 
draft: true
---

## E a√≠, vamos falar de Quarto?

![](images/img-0.png)

Hello, world!

Voc√™ que gosta da nossa querida linguagem R provavelmente j√° deve ter ouvido falar sobre Quarto. Por defini√ß√£o, segundo [Quarto.org](https://quarto.org/docs/get-started/hello/rstudio.html),

> *"Quarto √© uma vers√£o multil√≠ngue da pr√≥xima gera√ß√£o do R Markdown (do RStudio) e inclui dezenas de novos recursos, ao mesmo tempo em que √© capaz de renderizar a maioria dos arquivos `.Rmd` existentes sem modifica√ß√£o."*

Existem diversas possibilidades de cria√ß√£o com Quarto, especialmente pelo fato de que ele √© independente de `R`, portanto, √© poss√≠vel criar diferentes conte√∫dos din√¢micos com Python, R, Julia e Observable, por exemplo.

A base para edi√ß√£o em textos √© a [linguagem de marca√ß√£o](https://pt.wikipedia.org/wiki/Linguagem_de_marca%C3%A7%C3%A3o) *Markdown* e ao trabalharmos com c√≥digos, os *chunks* continuam sendo o nosso melhor amigo. Quanto √†s publica√ß√µes, temos a possibilidade de criar relat√≥rios em diversos formatos (HTML, PDF, por exemplo), apresenta√ß√µes, sites, blogs, livros e outros.

Assim, hoje apresento a voc√™s um mini tutorial de como criar o nosso primeiro relat√≥rio em HTML com Quarto no RStudio. Para tanto, como o Quarto √© independente de R, voc√™ precisa configurar o ambiente para explorar da melhor forma poss√≠vel as infinitas possibilidades que o Quarto oferece.

Aqui v√£o alguns pontos s√£o importantes:

::: callout-note
# Pr√©-requisitos

-   Baixar e instalar a [vers√£o mais recente do Quarto](https://quarto.org/docs/get-started/);

-   Baixar e instalar a [vers√£o mais recente do R](https://cran.r-project.org/). Caso j√° tenha, verifique se o seu R est√° atualizado para R 4.1 ou R 4.2;

-   Baixar e instalar a [vers√£o mais recente do RStudio.](https://posit.co/download/rstudio-desktop/)

Para mais detalhes, [clique aqui](https://quarto.org/docs/get-started/hello/rstudio.html).

Outra op√ß√£o bem bacana √© utilizar o [Posit Cloud](https://posit.cloud), que permite voc√™ explorar as ferramentas do RStudio na nuvem de maneira simples e sem grandes dificuldades para configurar. Caso voc√™ nunca tenha explorado o Posit Cloud, acesse o *link* [aqui](https://posit.cloud) e crie uma conta atrav√©s dos seguintes passos:

![](images/img-2.gif){fig-align="center"}

Para saber sobre como criar um projeto no Posit Cloud, acesse a demonstra√ß√£o [aqui](https://raw.githubusercontent.com/a-hayana/quarto_report_post/master/img/gif-0.gif).
:::

<br>

## O primeiro passo

Agora, considerando que voc√™ j√° est√° com o ambiente preparado, vamos colocar a m√£o na massa!

Supondo que voc√™ est√° come√ßando do *zero* no Quarto, o primeiro passo √© criar o documento (`.qmd`) no RStudio. Sugiro fortemente que voc√™ crie um projeto antes de tudo. S√£o apenas seis passos simples:

![](images/img-3.png){fig-align="center"}

*Voil√†!* Temos o nosso projeto e primeiro documento criados. Este √© o modelo b√°sico para publica√ß√£o em Quarto e o formato de sa√≠da ser√°, por padr√£o, em HTML. Para verificarmos o resultado final precisamos renderizar o nosso arquivo `.qmd`. Para isso, clique em `Render` ou utilize o atalho do teclado `CTRL + SHIFT + K`.

![](images/img-4.png){fig-align="center"}

E temos como resultado final:

![](images/img-5.png){fig-align="center"}

Perceba que na tela acima eu estou trabalhando com o *Visual* selecionado (bot√£o localizado na barra de ferramentas), o que permite a visualiza√ß√£o das altera√ß√µes em tempo real e √© uma √≥tima op√ß√£o para quem ainda n√£o est√° t√£o familiarizado(a) com *Markdown*. Vale a pena conferir as diversas possibilidades de utiliza√ß√£o do *Visual Editor* em um post da Posit intitulado [*Exploring RStudio's Visual Markdown Editor*](https://posit.co/blog/exploring-rstudio-visual-markdown-editor/), cuja autoria √© de Isabella Vel√°squez.

Caso voc√™ prefira, ao clicar em *Source* (bot√£o √† esquerda do *Visual* na barra de ferramentas), √© poss√≠vel escrever seu documento no modo de origem ou mesmo ir alternando entre o *Source* e *Visual*.

E a√≠, o que achou? Chegamos at√© aqui e voc√™ deu os seus primeiros passos com Quarto (uhuul!! üòç)! Agora se liga nessas dicas:

::: callout-warning
# Dicas

-   Seja *curioso(a)*: aqui eu apresentei uma das diversas formas para criar documentos, projetos, usar o RStudio na nuvem, etc, entretanto, existem outras possibilidades que voc√™ pode aprender *explorando a documenta√ß√£o*;

-   Se voc√™ j√° trabalha com *R Markdown*, possivelmente vai achar muitas semelhan√ßas nas aplica√ß√µes com o Quarto. Assim, sugiro tamb√©m *explorar a documenta√ß√£o*;

-   Por fim, uma dica final: *explore a documenta√ß√£o* üòÇüòÇ e acompanhe as novidades em [Quarto.org](https://quarto.org).
:::

<br>

## Subindo um degrau

Agora que voc√™ j√° sabe criar um documento com Quarto, vamos explorar algumas ferramentas para incrementar as nossas cria√ß√µes.

Criei um modelo de relat√≥rio `.qmd` cuja sa√≠da √© em `HTML` e est√° dispon√≠vel [aqui](https://a-hayana.github.io/quarto_report_post/quarto_report_post.html). Assim, vamos desvendar cada etapa de cria√ß√£o juntos.

Primeiramente, √© importante compreender a estrutura de um documento em Quarto. Veja a representa√ß√£o b√°sica apresentada abaixo:

![](images/img-6.png){fig-align="center"}

Essas tr√™s partes s√£o:

-   **YAML (*Yet Another Markup Language*):** cabe√ßalho onde s√£o inseridas as configura√ß√µes do documento (formata√ß√£o, data, t√≠tulo, autor, entre outros). √â sempre inserido no in√≠cio do documento e delimitado por `---`;

-   **Texto:** usa *markdown* como sua sintaxe de documento principal;

-   **C√≥digos:** vers√£o multil√≠ngue, portanto, nos *chunks* (blocos de c√≥digos) podemos inserir c√≥digos em R, Python, Julia e outros.

Assim, no exemplo que vamos explorar, veja que temos alguns elementos interessantes que foram inseridos.

Note que no canto superior direito √© poss√≠vel identificar uma chave, em que o(a) leitor(a) pode selecionar o tema desejado, conforme a figura a seguir:

```{r}
#| echo: false
#| out.width: "40%"
#| fig-align: "center"

knitr::include_graphics("images/img-7.png")
```

Observe na figura acima que o documento possui um t√≠tulo, subt√≠tulo, nome da autora e a data de publica√ß√£o. Tais informa√ß√µes s√£o configuradas no YAML, onde tamb√©m foram definidas outras configura√ß√µes do documento, conforme o c√≥digo a seguir:

::: callout-tip
## *YAML*

``` yaml
---
title: "Meu primeiro relat√≥rio" # -----> T√≠tulo
subtitle: "Exemplo: Relat√≥rio em Quarto" # -----> Subt√≠tulo
author: "Ariane Hayana" # -----> Autoria
date: "`r format(Sys.Date())`" # -----> Data de publica√ß√£o
date-format: short # -----> Formato de data curto: dd/mm/aaaa
lang: pt # -----> Linguagem: portugu√™s
format: 
  html: 
    code-fold: true # -----> code-fold: `true` para "ocultar" o bloco de c√≥digos
    theme: 
      light: [pulse,custom.scss] # Tema modo claro
      dark: [cyborg,custom.scss] # Tema modo escuro
title-block-banner: true # -----> Estilo de banner no topo do documento
bibliography: references.bib # -----> Refer√™ncias do documento
---
```
:::

Deixei alguns coment√°rios sobre as configura√ß√µes no c√≥digo, mas alguns pontos cabem aten√ß√£o especial:

-   `date-format`: neste exemplo, apresentei o formato curto de data, entretanto, existem diversos formatos poss√≠veis que podem ser consultados em [Quarto.org](https://quarto.org/docs/reference/dates.html#date-formatting);

-   `lang`: esta op√ß√£o √© usada para identificar o idioma principal do documento. Outras idiomas podem ser considerados, como o espanhol (`lang: es`) e franc√™s (`lang: fr`), por exemplo;

-   `code-fold`: quando esta op√ß√£o √© igual a `true`, o bloco de c√≥digos √© ocultado, podendo ser consultado ao clicar na palavra "*C√≥digo*";

-   `theme: light: [pulse,custom.scss] ou dark: [cyborg,custom.scss]`: √© nesta configura√ß√£o que definimos qual tema utilizar em nosso documento e quais outras caracter√≠sticas podemos customizar utilizando um arquivo `.scss` (veja mais em [Quarto.pub](https://quarto.org/docs/output-formats/html-themes.html#custom-themes));

-   `title-block-banner: true`: se igual a `true`, esta configura√ß√£o insere um bloco de t√≠tulo no estilo de banner no topo do documento;

-   `bibliography`: aqui est√£o as refer√™ncias utilizadas no documento gerado. Trata-se de um arquivo `.bib`.

Ap√≥s as configura√ß√µes do cabe√ßalho estarem definidas, ent√£o vamos para o *texto*. No [modelo](https://a-hayana.github.io/quarto_report_post/quarto_report_post.html), temos uma arte feita pela [Allison Horst](https://github.com/allisonhorst/stats-illustrations/blob/main/julie-mine-quarto-keynote/quarto_thankyou.png), que foi inserida no documento com o `include_graphics` do `knitr`. Se voc√™ √© familiarizado(a) com R Markdown, provavelmente vai achar um pouco estranho a configura√ß√£o dos *chunks*. Perceba que cada linha √© precedida por um `#|`:

``` {{r}}
#| echo: false
#| out.width: "100%"
#| fig-cap: "Arte por [Allison Horst.](https://github.com/allisonhorst/stats-illustrations/blob/main/julie-mine-quarto-keynote/quarto_thankyou.png)"

knitr::include_graphics("images/img-1.png")
```

J√° na margem *direita* podemos verificar algumas informa√ß√µes sobre a R-Ladies, que s√£o inseridas no documento Quarto utilizando `column-margin`. Veja um trecho exemplificativo:

``` {{r}}
::: column-margin

#### O que √© a R-Ladies?

[R-Ladies](https://rladies.org/) √© uma organiza√ß√£o mundial cuja miss√£o √© promover 
a diversidade de g√™nero na comunidade da linguagem R.

**R-Ladies S√£o Paulo** integra, orgulhosamente, a organiza√ß√£o R-Ladies Global,
em S√£o Paulo.

As atividades incluem meetups e mentorias em um ambiente seguro e amig√°vel.

:::
```

Para exemplificar a utiliza√ß√£o de *chunks*, no [modelo](https://a-hayana.github.io/quarto_report_post/quarto_report_post.html) temos o conjunto de dados de `Gapminder` sobre expectativa de vida, PIB *per capita* e popula√ß√£o por pa√≠s. Neste exemplo foram explorados os pacotes `{dados}` [@dados], `{reactable}` [@reactable] e `{dplyr}` [@dplyr]:

``` {{r}}
#| warning: false
#| message: false

library(dados)
library(reactable)
library(dplyr)

dados_gapminder |> # Base do pacote {dados}
  select(continente, pais, ano, pib_per_capita) |> # Selecionando algumas colunas
  reactable(
    groupBy = "continente", # Agrupando pela coluna 'continente'
    searchable = TRUE, # Inserindo uma busca na tabela
    outlined = TRUE, # Linhas na tabela
    columns = list(ano = colDef(sortable = TRUE)) # Ordem crescente na coluna 'ano'
  )
```

Como resultado, temos:

```{r}
#| echo: false

knitr::include_graphics("images/gif-1.gif")

```

Particularmente, gosto bastante do visual elegante que resultam as tabelas com `{reactable}`. Na estrutura acima √© poss√≠vel pesquisar informa√ß√µes dentro da pr√≥pria tabela com o "*Search*" e ao clicar em cada um dos continentes √© poss√≠vel explorar outras informa√ß√µes.

J√° nas visualiza√ß√µes gr√°ficas, trouxe um exemplo que utiliza dados sobre nomes de beb√™s do pacote `{dados}` [@dados], `{gganimate}` [@gganimate] e `{ggplot2}` [@ggplot2]. Para tanto, utilizei apenas dois nomes para elaborar o gr√°fico animado com o `{gganimate}`. Mais detalhes sobre o pacote podem ser encontrados em um [post da Curso-R](https://blog.curso-r.com/posts/2021-06-09-gganimate/).

``` {{r}}
#| fig-width: 8
#| fig-height: 5
#| warning: false
#| message: false

library(gganimate)
library(ggplot2)

bebes |>
  filter(nome %in% c("Patricia", "Helen")) |> 
  ggplot(aes(x = ano, y = n, group = nome, color = nome)) +
  geom_line() +
  geom_point() +
  xlab("Ano") + 
  ylab("N√∫mero de beb√™s nascidos") +
  transition_reveal(ano) +
  theme_classic()
```

O resultado final ser√°:

```{r}
#| echo: false
knitr::include_graphics("images/gif-2.gif")
```

E assim passamos por todas as etapas:

```{r}
#| echo: false
knitr::include_graphics("images/gif-3.gif")
```

E a√≠, gostaram? Espero que sim!

E lembre-se:

> "*O primeiro passo n√£o te leva onde voc√™ quer ir, mas te tira de onde voc√™ est√°.*"

D√™ o primeiro passo, explore a documenta√ß√£o do [Quarto.org](https://quarto.org) e pratique! üòâ

::: callout-note
# Materiais do tutorial:

-   Modelo em `HTML`: <https://a-hayana.github.io/quarto_report_post/quarto_report_post.html>
-   C√≥digos: <https://github.com/a-hayana/quarto_report_post/blob/master/quarto_report_post.qmd>
-   Reposit√≥rio: <https://github.com/a-hayana/quarto_report_post>
:::

At√© breve!

<a href="https://www.linkedin.com/in/arianehayana/" target="_blank"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/linkedin/linkedin-original.svg" width="20" height="22"/> Ariane Hayana </a>
